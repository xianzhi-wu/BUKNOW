<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta name="format-detection" content="email=no">
<meta name="apple-mobile-web-app-title" content="">
<meta name="Keywords" content=""/>
<meta name="Description" content=""/>
<title>布诺网-促销信息平台-BuKnow.Com</title>
<link rel="stylesheet" type="text/css" href="css/mobile-bn-global.css"/>
</head>

<body class="comment-page">
  <header class="header box-layout">
    <a href="javascript:history.go(-1)" class="back">返回</a>
    <div class="header-title box-col">我要评论</div>
    <div class="blank-space"></div>
  </header>
  
  <div class="main">
    <div class="comment-stars">
      <span>我的评分:</span>
      <a href="javascript:void(0);"></a>
      <a href="javascript:void(0);"></a>
      <a href="javascript:void(0);"></a>
      <a href="javascript:void(0);"></a>
      <a href="javascript:void(0);"></a>
    </div>
    <div class="comment-tarea"><textarea id="comment-tarea" rows="8" placeholder="评论至少10个字..."></textarea></div>
    <a href="javascript:void(0);" class="comment-btn">提交</a>
    <div class="comment-tip"></div>
  </div>
  <script src="js/zepto.min.js"></script>
  <script src="js/fastclick.js"></script>
  <script>
    $(function() {
		var $stars = $(".comment-stars"), $star = $("a", $stars), iScore = 0;
		$star.click(function() {
			iScore = $(this).index();  //评分
			for(var i = 0; i < $star.length; i++) {
				$star[i].className = i < iScore ? "star-on" : "";
			}
		});
		
		$(".comment-btn").click(function() {
			if(checkpoint() && checktextarea()) {
			}
		});
		
		function checkpoint() {
			if(iScore == 0) {
				$(".comment-tip").text("评分不能为0").show();
				hide_tip();
				return false;
			}
			return true;
		}
		function checktextarea() {
			var value = $("#comment-tarea").val();
			if(value.length == "") {
				$(".comment-tip").text("评论不能为空").show();
				hide_tip();
				return false;
			} else if(strlen(value) < 20){
				$(".comment-tip").text("评论不能少于10个字").show();
				hide_tip();
				return false;
			}
			return true;
		}	
		
		function hide_tip() {
			setTimeout(function() {
		        $(".comment-tip").hide();
		    }, 1500);
		}
		
		//去除所有空格
		function removeAllSpace(str) {
			return str.replace(/\s+/g, "");
        }
		function strlen(val) {
			var len = 0, value = removeAllSpace(val);
			for (i = 0; i < value.length; i++) {
				var char = value.charCodeAt(i);
				if ((char >= 0x0001 && char <= 0x007e) || (0xff60 <= char && char <= 0xff9f)) {
					len++;
				}
				else {
					len += 2;
				}
			}
			return len;
		}
    });
  </script>
</body>
</html>